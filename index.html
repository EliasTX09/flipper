<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Flipper Zerov Updater</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; padding: 20px; }
    button { margin: 5px; padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; }
    #log { background: #222; padding: 10px; border-radius: 6px; height: 300px; overflow-y: auto; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>âš¡ Flipper Zero Updater</h1>

  <button id="connectBtn">ğŸ”Œ Connect</button>
  <button id="disconnectBtn">âŒ Disconnect</button>
  <button id="rebootBtn">ğŸ”„ Reboot</button>

  <h3>Logs</h3>
  <div id="log"></div>

  <!-- Lade notoga.js lokal -->
  <script src="https://raw.githubusercontent.com/EliasTX09/flipper/main/notoga.js"></script>

  <script>
    const logEl = document.getElementById("log");
    function log(msg) {
      logEl.textContent += "\n" + msg;
      logEl.scrollTop = logEl.scrollHeight;
    }

    // PrÃ¼fen, ob notoga.js geladen wurde
    window.addEventListener("load", () => {
      if (window.flipper) {
        log("âœ… notoga.js geladen, window.flipper verfÃ¼gbar");
        console.log("DEBUG:", window.flipper);
      } else {
        log("âŒ notoga.js NICHT geladen oder window.flipper fehlt!");
      }
    });

    // Buttons
    document.getElementById("connectBtn").onclick = async () => {
      try {
        await window.flipper.connect();
        log("âœ… Verbunden mit Flipper");
      } catch (err) {
        log("âŒ Fehler beim Verbinden: " + err);
      }
    };

    document.getElementById("disconnectBtn").onclick = async () => {
      try {
        await window.flipper.disconnect();
        log("âœ… Getrennt");
      } catch (err) {
        log("âŒ Fehler beim Trennen: " + err);
      }
    };

    document.getElementById("rebootBtn").onclick = async () => {
      try {
        await window.flipper.commands.system.reboot("os");
        log("ğŸ”„ Reboot-Befehl gesendet");
      } catch (err) {
        log("âŒ Fehler beim Reboot: " + err);
      }
    };
  </script>
</body>
</html>
